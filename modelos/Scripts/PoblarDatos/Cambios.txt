//Padre de lugar puede ser NULL

ALTER TABLE `ex4play`.`lugar` 
DROP FOREIGN KEY `fk_lugar_lugar1`;
ALTER TABLE `ex4play`.`lugar` 
CHANGE COLUMN `inlugpadre` `inlugpadre` INT(11) NULL COMMENT 'Padre o entidad de orden superior que contiene este lugar' ;
ALTER TABLE `ex4play`.`lugar` 
ADD CONSTRAINT `fk_lugar_lugar1`
  FOREIGN KEY (`inlugpadre`)
  REFERENCES `ex4play`.`lugar` (`inlugar`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;


ALTER TABLE `ex4play`.`usuario` 
ADD COLUMN `txUsuImagen` LONGTEXT NOT NULL COMMENT 'Guarda la url de la imagen' AFTER `usuario_inlugar`;


ALTER TABLE `ex4play`.`videojuego` 
ADD COLUMN `txurlinformacion` VARCHAR(1000) NOT NULL DEFAULT 'SIN INFORMACION' COMMENT 'URL donde encuentra informacion : Administrador\n' AFTER `videojuego_consola`,
ADD COLUMN `txobservaciones` VARCHAR(1000) NOT NULL DEFAULT 'NINGUNA' COMMENT 'Observaciones' AFTER `txurlinformacion`,
ADD COLUMN `txgenerovideojuego` VARCHAR(200) NOT NULL DEFAULT 'SIN CLASIFICAR' COMMENT 'Genero del videojuego' AFTER `txobservaciones`;

ALTER TABLE `ex4play`.`plansuscripcion` 
ADD COLUMN `inmesesplan` INT NULL DEFAULT 0 COMMENT 'Cantidad de meses que incluye la suscripción, 0 Ilimitado' AFTER `ingratis`,
ADD COLUMN `dbvalsuscripcion` DOUBLE NULL DEFAULT 0 COMMENT 'Precio de la suscripción. Se guarda en la suscripcion al usuario, para que se mantenga el precio contratado.' AFTER `inmesesplan`;

ALTER TABLE `ex4play`.`planusuario` 
ADD COLUMN `dbvalsuscripcion` DOUBLE NOT NULL DEFAULT 0 COMMENT 'Precio de la suscripción que posee el usuario' AFTER `planusuario_idusuario`;

ALTER TABLE `ex4play`.`puntosusuario` 
ADD COLUMN `inefectivos` INT NOT NULL DEFAULT 0 COMMENT 'Puntos efectivos 1, Puntos NO efectivos 0' AFTER `insumaresta`;

ALTER TABLE `ex4play`.`videojuego` 
ADD COLUMN `tximagen` VARCHAR(300) NOT NULL DEFAULT 'PENDIENTE' AFTER `txgenerovideojuego`;

ALTER TABLE `ex4play`.`videojuego`  ADD FULLTEXT(txnomvideojuego,txurlinformacion, txobservaciones,txgenerovideojuego,tximagen);

ALTER TABLE `ex4play`.`usuario` 
ADD COLUMN `txtelefono` VARCHAR(45) NOT NULL DEFAULT 'PENDIENTE' COMMENT 'Telefono del usuario' AFTER `txmailusuario`,
ADD COLUMN `txdireccion` VARCHAR(250) NOT NULL DEFAULT 'PENDIENTE' COMMENT 'Direccion del usuario' AFTER `txtelefono`;

ALTER TABLE `ex4play`.`usuario` 
ADD COLUMN `txclave` BLOB NULL COMMENT 'Almacena la clave encriptada' AFTER `txUsuImagen`;

ALTER TABLE `ex4play`.`usuario` 
ADD COLUMN `inusugenero` INT NOT NULL DEFAULT 0 COMMENT '0 : Sin especificar, 1: Masculino, 2 : Femenino' AFTER `txclave`;

ALTER TABLE `ex4play`.`usuario` 
ADD COLUMN `feusunacimiento` DATETIME NULL COMMENT 'Fecha de nacimiento del usuario' AFTER `inusugenero`;


delete FROM ex4play.ejemplarusuario where idejemplarusuario >= 0;

alter table ex4play.ejemplarusuario auto_increment=1;

ALTER TABLE `ex4play`.`ejemplarusuario` 
CHANGE COLUMN `idejemplarusuario` `idejemplarusuario` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Id del registro de relacion\n' ;

ALTER TABLE `ex4play`.`ejemplarusuario` 
ADD COLUMN `inbloqueado` INT NOT NULL DEFAULT 0 COMMENT 'Bloqueo del ejemplar por adquisicion de videojuego sin pustos disponibles - Bloqueado 1, No bloqueado 0' AFTER `inpublicado`;

ALTER TABLE `ex4play`.`ejemplarusuario` 
ADD COLUMN `innegociacion` INT NOT NULL DEFAULT 0 COMMENT 'Indica si el ejemplar esta = 1 o no esta = 0 en negociacion' AFTER `inpublicado`;

ALTER TABLE `ex4play`.`usuario` 
ADD COLUMN `dblatitud` DOUBLE NOT NULL DEFAULT 0 AFTER `feusunacimiento`,
ADD COLUMN `dblongitud` DOUBLE NOT NULL DEFAULT 0 AFTER `dblatitud`;
